<m-import src="@/fragments/pageSection.html" as="page-section" />
<m-import src="@/fragments/codeBlock.html" as="code-block" />

<m-fragment src="@/layouts/gettingStartedLayout.html" page-title="JS API">
    <m-content slot="header">
        API Usage
    </m-content>

    <page-section>
        <p>
            This section describes the basic usage and functionality of the Mooltipage JavaScript API.
            The JS API is an advanced interface, and the information on this page assumes a background knowledge of JavaScript and Node.JS.
            Additionally, this guide does not explain the basic concepts and features of Mooltipage.
            It is recommended to review the CLI documentation even if you intend to use only the API.
            You will also need an editor capable of working with JavaScript.
            A basic text editor like Notepad will work, but a full editor such as VS Code is recommended.
        </p>
    </page-section>

    <page-section title="Creating a build script:">
        <p>
            If you followed the recommended setup in the installation section, then you have a basic npm project with Mooltipage installed.
            The next step is to create a "build" script that will be called by Node.JS to compile your project.
            This script will be responsible for loading, configuring, and invoking Mooltipage.
            For a basic general-purpose build script, follow these steps:
        </p>
        <ol>
            <li>
                First, we need to create the build script file.
                Create a file call "build.js" in the root of your project.
                It can be moved later if you prefer to structure your project differently.
            </li>
            <li>
                Next, open the new file in an editor.
                Add this line to the top of the file:
                <code-block language="javascript" rows="1">
                    const { Mooltipage } from 'mooltipage';
                </code-block>
                This will instruct Node.JS to load the main Mooltipage API constructor, and save it to the local constant Mooltipage.
            </li>
            <li>
                Mooltipage is loaded, but we need an instance before we can use it.
                To create an instance, we call the Mooltipage() construct and pass it a configuration object.
                Create a configuration object like this:
                <code-block language="javascript" rows="5">
                    const mooltipageConfig = {
                        inPath: './src/',
                        outPath: './dist/',
                        formatter: 'pretty'
                    };
                </code-block>
                With this config object, Mooltipage will be configured to load inputs from "./src" and save them to "./dist".
                Additionally, HTML outputs will be formatted with the "pretty" HTML formatter.
                For more details on these properties and their effects, see the CLI usage section.
            </li>
            <li>
                Now that we have loaded Mooltipage and have prepared a config object, we can create a Mooltipage instance.
                We create an instance by invoking the Mooltipage constructor.
                Add this code to your build script:
                <code-block language="javascript" rows="1">
                    const mp = new Mooltipage(mooltipageConfig);
                </code-block>
                This instance is immediately ready to use and can be reused for as many pages as desired.
            </li>
        </ol>
        <p>
            At this point, the build script should look like this (comments added for clarity):
            <code-block language="javascript" rows="15">
                // import and load mooltipage
                const { Mooltipage } from 'mooltipage';

                // prepare mooltipage config object
                const mooltipageConfig = {
                    // load inputs from "./src" folder
                    inPath: './src/',
                    // save outputs to "./dist" folder
                    outPath: './dist/
                    // format output HTML for human readability
                    formatter: 'pretty'
                };

                // create mooltipage instance
                const mp = new Mooltipage(mooltipageConfig);
            </code-block>
            This script is almost done
        </p>
    </page-section>

    <page-section title="Building a single page:">
        <p>

        </p>
    </page-section>
</m-fragment>
